<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{kraft-layout}">
<head>
    <title th:text="'Create ' + ${entityName}"></title>
</head>
<body>
<h1 th:text="'Create ' + ${entityName}"></h1>

<th:block layout:fragment="content">
    <form th:action="${actionUrl}" method='post' enctype='multipart/form-data'>
        <div th:each="field : ${fields}" th:class="${field.wrapperClass}" th:if="${field != null}">
            <label th:for="${field.name}" class="capitalize text-lg mb-1" th:text="${field.label} + ${field.required ? ' *' : ''}"></label>
            <div th:switch="${field.type}">
                <div th:case="'text'" class="">
                    <div th:replace="~{kraft-fragments/inputs/inputs :: textInput(${field})}"></div>
                    <div>
                         <span th:if="${validationErrors != null and validationErrors.containsKey(field.name)}"
                               th:text="${validationErrors[field.name]}"
                               style="color:red;">
                         </span>
                    </div>
                </div>

                <div th:case="'textarea'">
                    <div th:replace="~{kraft-fragments/inputs/inputs :: textareaInput(${field})}"></div>
                    <div>
                         <span th:if="${validationErrors != null and validationErrors.containsKey(field.name)}"
                               th:text="${validationErrors[field.name]}"
                               style="color:red;">
                         </span>
                    </div>
                </div>

                <div th:case="'checkbox'">
                    <div th:replace="~{kraft-fragments/inputs/inputs :: checkboxInput(${field})}"></div>
                    <div>
                         <span th:if="${validationErrors != null and validationErrors.containsKey(field.name)}"
                               th:text="${validationErrors[field.name]}"
                               style="color:red;">
                         </span>
                    </div>
                </div>
                <div th:case="'select'">
                    <div th:replace="~{kraft-fragments/inputs/inputs :: selectInput(${field})}"></div>
                    <div>
                         <span th:if="${validationErrors != null and validationErrors.containsKey(field.name)}"
                               th:text="${validationErrors[field.name]}"
                               style="color:red;">
                         </span>
                    </div>
                </div>
                <div th:case="'searchable-select'">
                    <div th:replace="~{kraft-fragments/inputs/inputs :: searchSelectInput(${field})}"></div>
                    <div>
                         <span th:if="${validationErrors != null and validationErrors.containsKey(field.name)}"
                               th:text="${validationErrors[field.name]}"
                               style="color:red;">
                         </span>
                    </div>
                </div>
                <div th:case="'number'">
                    <div th:replace="~{kraft-fragments/inputs/inputs :: numberInput(${field})}"></div>
                    <div>
                         <span th:if="${validationErrors != null and validationErrors.containsKey(field.name)}"
                               th:text="${validationErrors[field.name]}"
                               style="color:red;">
                         </span>
                    </div>
                </div>
                <div th:case="'email'">
                    <div th:replace="~{kraft-fragments/inputs/inputs :: emailInput(${field})}"></div>
                    <div>
                         <span th:if="${validationErrors != null and validationErrors.containsKey(field.name)}"
                               th:text="${validationErrors[field.name]}"
                               style="color:red;">
                         </span>
                    </div>
                </div>
                <div th:case="'password'">
                    <div th:replace="~{kraft-fragments/inputs/inputs :: passwordInput(${field})}"></div>
                    <div>
                         <span th:if="${validationErrors != null and validationErrors.containsKey(field.name)}"
                               th:text="${validationErrors[field.name]}"
                               style="color:red;">
                         </span>
                    </div>
                </div>
                <div th:case="'color'">
                    <div th:replace="~{kraft-fragments/inputs/inputs :: colorInput(${field})}"></div>
                    <div>
                         <span th:if="${validationErrors != null and validationErrors.containsKey(field.name)}"
                               th:text="${validationErrors[field.name]}"
                               style="color:red;">
                         </span>
                    </div>
                </div>
                <div th:case="'file'">
                    <div th:replace="~{kraft-fragments/inputs/inputs :: fileInput(${field})}"></div>
                    <div>
                         <span th:if="${validationErrors != null and validationErrors.containsKey(field.name)}"
                               th:text="${validationErrors[field.name]}"
                               style="color:red;">
                         </span>
                    </div>
                </div>
                <div th:case="'time'">
                    <div th:replace="~{kraft-fragments/inputs/inputs :: timeInput(${field})}"></div>
                    <div>
                         <span th:if="${validationErrors != null and validationErrors.containsKey(field.name)}"
                               th:text="${validationErrors[field.name]}"
                               style="color:red;">
                         </span>
                    </div>
                </div>
                <div th:case="'date'">
                    <div th:replace="~{kraft-fragments/inputs/inputs :: dateInput(${field})}"></div>
                    <div>
                         <span th:if="${validationErrors != null and validationErrors.containsKey(field.name)}"
                               th:text="${validationErrors[field.name]}"
                               style="color:red;">
                         </span>
                    </div>
                </div>
                <div th:case="'datetime'">
                    <div th:replace="~{kraft-fragments/inputs/inputs :: dateTimeInput(${field})}"></div>
                    <div>
                         <span th:if="${validationErrors != null and validationErrors.containsKey(field.name)}"
                               th:text="${validationErrors[field.name]}"
                               style="color:red;">
                         </span>
                    </div>
                </div>
                <div th:case="'range'">
                    <div th:replace="~{kraft-fragments/inputs/inputs :: rangeInput(${field})}"></div>
                    <div>
                         <span th:if="${validationErrors != null and validationErrors.containsKey(field.name)}"
                               th:text="${validationErrors[field.name]}"
                               style="color:red;">
                         </span>
                    </div>
                </div>
                <div th:case="'tel'">
                    <div th:replace="~{kraft-fragments/inputs/inputs :: telInput(${field})}"></div>
                    <div>
                         <span th:if="${validationErrors != null and validationErrors.containsKey(field.name)}"
                               th:text="${validationErrors[field.name]}"
                               style="color:red;">
                         </span>
                    </div>
                </div>
                <div th:case="'url'">
                    <div th:replace="~{kraft-fragments/inputs/inputs :: urlInput(${field})}"></div>
                    <div>
                         <span th:if="${validationErrors != null and validationErrors.containsKey(field.name)}"
                               th:text="${validationErrors[field.name]}"
                               style="color:red;">
                         </span>
                    </div>
                </div>
                <div th:case="'wysiwyg'">
                    <div th:replace="~{kraft-fragments/inputs/inputs :: wysiwygInput(${field})}"></div>
                    <div>
                         <span th:if="${validationErrors != null and validationErrors.containsKey(field.name)}"
                               th:text="${validationErrors[field.name]}"
                               style="color:red;">
                         </span>
                    </div>
                </div>
                <div th:case="'embedded'">
                    <div th:replace="~{kraft-fragments/inputs/inputs :: embeddedInput(${field})}"></div>
                    <div>
                         <span th:if="${validationErrors != null and validationErrors.containsKey(field.name)}"
                               th:text="${validationErrors[field.name]}"
                               style="color:red;">
                         </span>
                    </div>
                </div>

                <div th:case="'currency'">
                    <div th:replace="~{kraft-fragments/inputs/inputs :: currencyInput(${field})}"></div>
                    <div>
                         <span th:if="${validationErrors != null and validationErrors.containsKey(field.name)}"
                               style="color:red;"
                               th:text="${validationErrors[field.name]}">
                         </span>
                    </div>
                </div>

                <div th:case="'tags'">
                    <div th:replace="~{kraft-fragments/inputs/inputs :: tagInput(${field})}"></div>
                    <div>
                         <span th:if="${validationErrors != null and validationErrors.containsKey(field.name)}"
                               th:text="${validationErrors[field.name]}"
                               style="color:red;">
                         </span>
                    </div>
                </div>
            </div>
        </div>

        <div class="flex items-center justify-end gap-5 my-2">
            <button class="bg-red-200 p-2 text-white shadow rounded">Cancel</button>
            <button class="bg-blue-700 text-white rounded shadow p-2" type="submit">Save</button>
        </div>
    </form>

</th:block>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const form = document.querySelector("form");
        form.addEventListener("keydown", function (event) {
            if (event.key === "Enter" && event.target.tagName !== "TEXTAREA") {
                event.preventDefault(); // stop Enter from submitting
            }
        });
    });
</script>

</body>
</html>
