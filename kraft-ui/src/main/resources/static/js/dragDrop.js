function m(n){n.preventDefault(),n.stopPropagation()}function f(n,a){n.preventDefault(),n.stopPropagation();const e=a.querySelector('input[type="file"]');e.files=n.dataTransfer.files,c({target:e},e)}function d(n){const a=n.target,e="preview-"+a.id,i=document.getElementById(e);if(!i){console.warn(`No preview container found for ID: ${e}`);return}i.innerHTML="";const l=a.files;Array.from(l).forEach(o=>{const r=new FileReader;if(o.type.startsWith("image/"))r.onload=function(t){const s=document.createElement("img");s.src=t.target.result,s.className="w-full h-auto max-h-48 object-cover rounded shadow",i.appendChild(s)},r.readAsDataURL(o);else{const t=document.createElement("div");t.textContent=o.name,t.className="text-sm text-gray-700",i.appendChild(t)}})}function c(n,a){console.log("validating files "+a);const e=a.files[0];if(!e)return;const i=[".exe",".bat",".sh",".cmd",".msi",".com"],l=e.name.toLowerCase();if(i.some(r=>l.endsWith(r))){alert("Executable files are not allowed."),a.value="";return}d(n)}function u(n,a){const e=a.files[0];if(!e)return;const i=document.getElementById(`preview-${a.name}`);if(!i)return;i.innerHTML="";const l=e.type,o=new FileReader;o.onload=function(r){if(l.startsWith("image/")){const t=document.createElement("img");t.src=r.target.result,t.alt=e.name,t.classList.add("max-w-xs","max-h-48","mt-2","rounded"),i.appendChild(t)}else{const t=document.createElement("div");t.textContent=`Selected file: ${e.name}`,t.classList.add("text-sm","text-gray-600","mt-2"),i.appendChild(t)}},o.readAsDataURL(e)}window.handleDragOver=m;window.handleFileDrop=f;window.previewFiles=d;window.validateFile=c;window.previewFile=u;
