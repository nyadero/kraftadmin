document.addEventListener("DOMContentLoaded",function(){const c=document.getElementById("selectAll"),t=document.querySelectorAll(".rowCheckbox"),d=document.getElementById("closeBulkAction"),o=document.getElementById("bulkActions"),s=e=>{const n=e.closest("tr");e.checked?n.classList.add("selected"):n.classList.remove("selected")};c?.addEventListener("change",function(){t.forEach(e=>{e.checked=this.checked,s(e)}),l()}),t.forEach(e=>{e.addEventListener("change",function(){s(this),c.checked=Array.from(t).every(n=>n.checked),l()}),e.checked&&s(e)});function l(){const e=Array.from(t).some(n=>n.checked);o?.classList.toggle("hidden",!e)}d.addEventListener("click",function(){console.log("Hiding bulk actions and deselecting rows"),c.checked=!1,t.forEach(e=>{e.checked=!1,s(e)}),o?.classList.add("hidden")})});function i(c){const t=Array.from(document.querySelectorAll(".rowCheckbox:checked")).map(o=>o.value).join(","),d=document.getElementById("bulkAction").dataset.entityName;if(console.log("entityName "+c),!t)return alert("Please select at least one item.");c==="Delete"&&!confirm("Are you sure you want to delete the selected items?")||(window.location.href=`/admin/crud/${d}/bulk-action?action=${c}&selectedIds=${t}`)}window.performBulkAction=i;
